<?php if(!defined('BASEPATH'))exit('No Direct Access Allowed!');define('VERSION','1.0.1');if(!function_exists('_G')){function _G($key,$val=NULL){static $_GRE=array();if($val==NULL){return isset($_GRE["{$key}"])?$_GRE["{$key}"]:NULL;}$_GRE["{$key}"]=&$val;return true;}}class Loader{private function __construct(){}public static function import($_class,$_section=NULL,$_inc=true){static $_loaded=array();$_cls=($_section==NULL)?$_class:$_section.'/'.$_class;if(isset($_loaded[$_cls]))return;$_dir=(($_inc)?BASEPATH.'/lib/':SR_LIBPATH);$_dir.=$_cls;foreach(array($_dir.'.class.php',$_dir.'.php')as $_file){if(file_exists($_file)){require $_file;$_loaded[$_cls]=true;return true;}}exit('Syrian:Loader#import: Unable to load class '.$_class);}public static function config($_config,$_section=NULL,$_inc=false,$key=NULL){$_dir=(($_inc)?BASEPATH.'/config/':SR_CONFPATH);if($_section!=NULL)$_dir.=$_section.'/';$_dir.=$_config;foreach(array($_dir.'.conf.php',$_dir.'.php')as $_file){if(file_exists($_file)){$conf=include $_file;if($key!=NULL){return isset($conf["{$key}"])?$conf["{$key}"]:NULL;}return $conf;}}exit('Syrian:Loader#config: Unable to load config '.$_config);}public static function model($_model,$_section=NULL){static $_loaded=array();$_model=ucfirst($_model);$_cls=($_section==NULL)?$_model:$_section.'/'.$_model;if(isset($_loaded[$_cls])){return $_loaded[$_cls];}$_dir=SR_MODELPATH.$_cls;foreach(array($_dir.'.model.php',$_dir.'.php')as $_file){if(file_exists($_file)){include $_file;$o=NULL;$_class=$_model.'Model';if(class_exists($_class)){$o=new $_class();}else $o=new $_model();$_loaded[$_cls]=$o;return $o;}}exit('Syrain:Loader#model: Unable to load model '.$_model);}public static function helper($_helper,$conf=NULL,$_section=NULL,$_inc=false){static $_loaded=array();$_cls=($_section==NULL)?$_helper:$_section.'/'.$_helper;if(isset($_loaded[$_cls]))return $_loaded[$_cls];$_dir=(($_inc)?BASEPATH.'/helper/':SR_HELPERPATH);$_dir.=$_cls;foreach(array($_dir.'.helper.php',$_dir.'.php')as $_file){if(file_exists($_file)){require $_file;$_class=$_helper.'Helper';$obj=new $_class($conf);$_loaded[$_cls]=&$obj;return $obj;}}exit('Syrian:Loader#helper: Unable to load helper '.$_helper);}}class Helper{public function __construct($conf){}}class Model{public function __construct(){}}?>
